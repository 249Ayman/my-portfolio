/* 外部依赖导入 */
@import 'rehype-callouts/theme/vitepress';
@import url('https://cdn.jsdelivr.net/npm/katex@0.16.11/dist/katex.min.css');

/* 主题变量定义 */
.prose {
  /* 亮色模式变量 */
  --md-text-light-mode: 225 15% 25%;
  --md-text-secondary-light: 225 15% 35%;
  --md-heading-light: 225 15% 15%;
  --md-anchor-light: 225 15% 45%;
  --md-anchor-symbol-light: 250 60% 60%;

  /* 变量映射 */
  --md-text: var(--md-text-light-mode);
  --md-text-light: var(--md-text-secondary-light);
  --md-heading: var(--md-heading-light);
  --md-anchor: var(--md-text-light);
  --md-anchor-symbol: var(--md-anchor-symbol-light);
}

/* 暗色模式变量 */
.dark .prose {
  --md-text-dark-mode: 225 15% 80%;
  --md-text-secondary-dark: 225 15% 60%;
  --md-heading-dark: 225 15% 85%;
  --md-anchor-dark: var(--md-text-secondary-dark);
  --md-anchor-symbol-dark: 250 70% 70%;

  /* 变量映射 */
  --md-text: var(--md-text-dark-mode);
  --md-text-light: var(--md-text-secondary-dark);
  --md-heading: var(--md-heading-dark);
  --md-anchor: var(--md-text-light);
  --md-anchor-symbol: var(--md-anchor-symbol-dark);
}

/* 基础排版样式 */
.prose {
  color: hsl(var(--md-text));
  max-width: 75ch;
  font-size: 1rem;
  line-height: 2; /* 调整行高 */
  letter-spacing: 0.02em; /* 增加字间距 */
}

/* 标题样式 */
.prose h1 {
  color: hsl(var(--md-heading));
  font-weight: 700;
  font-size: 2em;
  margin-top: 0;
  margin-bottom: 1em;
  line-height: 1.4;
  letter-spacing: -0.02em;
}

.prose h2 {
  color: hsl(var(--md-heading));
  font-weight: 600;
  font-size: 1.5em;
  margin-top: 2em;
  margin-bottom: 1em;
  line-height: 1.4;
  letter-spacing: -0.01em;
}

.prose h3 {
  color: hsl(var(--md-heading));
  font-weight: 600;
  font-size: 1.25em;
  margin-top: 1.6em;
  margin-bottom: 0.8em;
  line-height: 1.4;
}

.prose h4 {
  color: hsl(var(--md-heading));
  font-weight: 600;
  font-size: 1.1em;
  margin-top: 1.4em;
  margin-bottom: 0.6em;
  line-height: 1.4;
}

.prose h5 {
  color: hsl(var(--md-heading));
  font-weight: 600;
  font-size: 1em;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.4;
}

.prose h6 {
  color: hsl(var(--md-heading));
  font-weight: 600;
  font-size: 0.875em;
  margin-top: 1em;
  margin-bottom: 0.4em;
  line-height: 1.4;
}

/* 正文样式优化 */
.prose p {
  margin: 1.5em 0;
  text-align: justify;
  hanging-punctuation: first;
}

.prose hr {
  width: 50px;
  margin: 2em auto;
}

.prose figure {
  margin-top: 2em;
  margin-bottom: 2em;
}

.prose figure > * {
  margin-top: 0;
  margin-bottom: 0;
}

/* 锚点链接样式 */
a.header-anchor {
  float: left;
  margin-left: -0.8em;
  border: 0 !important;
  opacity: 0;
  font-size: 1em;
  text-decoration: none;
  color: hsl(var(--md-anchor-symbol));
}

a.header-anchor:hover,
a.header-anchor:focus {
  text-decoration: none;
  color: hsl(var(--md-anchor-symbol));
}

h1:hover .header-anchor,
h1:focus .header-anchor,
h2:hover .header-anchor,
h2:focus .header-anchor,
h3:hover .header-anchor,
h3:focus .header-anchor,
h4:hover .header-anchor,
h4:focus .header-anchor,
h5:hover .header-anchor,
h5:focus .header-anchor,
h6:hover .header-anchor,
h6:focus .header-anchor {
  opacity: 0.6;
}

/* 代码块样式 */
.expressive-code {
  margin: 1em 0;
}

/* 代码块复制按钮样式 */
.expressive-code .copy button::before {
  display: none;
}

.expressive-code .copy button {
  width: 1.75rem !important;
  height: 1.75rem !important;
}

.expressive-code .copy button::after {
  width: 0.875rem !important;
  height: 0.875rem !important;
  opacity: 0.5 !important;
}

.expressive-code .copy button:hover::after,
.expressive-code .copy button:active::after {
  opacity: 1 !important;
}

.expressive-code .copy .feedback {
  font-size: 0.875rem;
  border-width: 0;
}

/* 代码块折叠部分样式 */
.expressive-code .ec-section summary .code {
  display: flex;
  align-items: center;
}

.expressive-code .ec-section summary svg {
  display: inline-block;
}

/* 代码行号样式 */
.expressive-code .gutter .ln {
  padding-inline: 0.75ch !important;
}

/* 移动端适配 */
@media (max-width: 640px) {
  .expressive-code .copy button {
    width: 1.5rem !important;
    height: 1.5rem !important;
  }

  .expressive-code .copy button::after {
    width: 0.75rem !important;
    height: 0.75rem !important;
  }

  .expressive-code .copy .feedback {
    font-size: 0.75rem;
  }
}

/* 响应式布局 */
@media (max-width: 640px) {
  .prose {
    font-size: 0.9375rem;
    line-height: 1.7;
  }

  .prose h1 {
    font-size: 1.875em;
    margin-bottom: 0.8em;
  }

  .prose h2 {
    font-size: 1.4em;
    margin-top: 1.8em;
    margin-bottom: 0.8em;
  }

  .prose h3 {
    font-size: 1.2em;
    margin-top: 1.5em;
    margin-bottom: 0.5em;
  }

  .prose p {
    margin: 1.2em 0;
  }

  .expressive-code {
    margin: 0.8em -1rem;
    font-size: 13px;
    padding: 0.6em 0.8em;
  }

  a.header-anchor {
    margin-left: -0.6em;
  }
}

/* 超小屏幕适配 */
@media (max-width: 380px) {
  .prose {
    font-size: 0.875rem;
  }

  .expressive-code {
    margin: 0.8em -0.75rem;
  }
}

.prose > p > a {
  text-underline-offset: 6px;
}

/* Gfm */
/* GFM 样式 */
.prose {
  /* 表格样式 */
  table {
    width: 100%;
    margin: 1em 0;
    border-collapse: collapse;
  }

  th,
  td {
    padding: 0.75em 1em;
    border: 1px solid hsl(var(--border));
  }

  th {
    background: hsl(var(--muted));
    font-weight: 600;
  }

  /* 任务列表样式 */
  input[type='checkbox'] {
    margin-right: 0.5em;
    margin-top: 0;
    vertical-align: middle;
  }

  /* 删除线样式 */
  del {
    color: hsl(var(--muted-foreground));
  }

  /* 脚注样式 */
  /* Style the footnotes section. */
  .footnotes {
    font-size: smaller;
    color: #8b949e;
    border-top: 1px solid #30363d;
  }

  /* Hide the section label for visual users. */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    word-wrap: normal;
    border: 0;
  }

  /* Place `[` and `]` around footnote references. */
  [data-footnote-ref]::before {
    content: '[';
  }

  [data-footnote-ref]::after {
    content: ']';
  }
}
