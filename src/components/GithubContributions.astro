---
import { cn } from "@lib/utils";
import Tooltip from "./ui/Tooltip.astro";

type Props = {
  contributionsData: Additional.Github.ContributionDays[];
};

const { contributionsData } = Astro.props;
---

<div class="grid grid-rows-7 grid-flow-col gap-1 w-full overflow-x-auto pb-2">
  {
    contributionsData.map((contribution) => {
      const { date, contributionCount } = contribution;
      const formattedDate = new Date(date).toLocaleDateString("en-US", {
        weekday: "long",
        year: "numeric",
        month: "long",
        day: "numeric",
      });
      
      const tooltipContent = `${formattedDate} ‚Äî ${
        contributionCount === 1
          ? "1 contribution üò∂"
          : contributionCount === 0
            ? "Rest day üèñ"
            : `${contributionCount} contributions`
      }`;

      return (
        <Tooltip content={tooltipContent}>
          <div
            class={cn(
              "size-2 relative hover:scale-125 transition-transform duration-150",
              contributionCount === 0
                ? "bg-zinc-200 dark:bg-zinc-900"
                : contributionCount < 5
                  ? "bg-zinc-300 dark:bg-zinc-700"
                  : contributionCount < 10
                    ? "bg-zinc-500"
                    : "bg-zinc-900 dark:bg-zinc-50"
            )}
          />
        </Tooltip>
      );
    })
  }
</div>