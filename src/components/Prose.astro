---
interface Props {
  class?: string
}

const { class: className } = Astro.props
---

<div
  class:list={[
    // 基础排版
    'prose prose-slate max-w-none dark:prose-invert',
    'prose-p:text-base prose-p:leading-8 prose-p:text-foreground/90',
    'prose-p:my-6 first:prose-p:mt-0',

    // 标题样式
    'prose-headings:scroll-mt-28',
    'prose-h2:text-2xl prose-h2:font-semibold prose-h2:tracking-tight',
    'prose-h2:text-foreground/90 prose-h2:mt-14 prose-h2:mb-6',
    'prose-h3:text-xl prose-h3:font-medium prose-h3:tracking-tight',
    'prose-h3:text-foreground/90 prose-h3:mt-10 prose-h3:mb-4',
    '[&_.anchor-icon]:opacity-0 [&_:hover_.anchor-icon]:opacity-100',
    '[&_.anchor-icon]:transition-opacity [&_.anchor-icon]:ml-2',
    '[&_.anchor-icon]:text-muted-foreground hover:[&_.anchor-icon]:text-foreground',

    // 代码样式
    'prose-code:px-2 prose-code:py-1 prose-code:font-["DM_Mono"]',
    'prose-code:bg-muted prose-code:rounded-md prose-code:border prose-code:border-border/40',
    'prose-code:text-foreground/80 prose-code:text-[0.9em]',
    'prose-code:before:content-none prose-code:after:content-none',
    '[&>pre]:!px-0 [&>pre]:!py-0 [&>pre]:!my-6 [&>pre]:!bg-muted',
    '[&>pre]:!rounded-lg [&>pre]:!border [&>pre]:border-border/40',
    '[&>pre>code]:!p-4 [&>pre>code]:!bg-transparent [&>pre>code]:!text-sm',
    '[&_.highlighted]:!bg-primary/10 [&_.highlighted]:!px-6 [&_.highlighted]:!-mx-4',
    '[&_.highlighted]:!border-l-2 [&_.highlighted]:!border-primary',

    // 引用块样式
    'prose-blockquote:not-italic prose-blockquote:pl-6 prose-blockquote:border-l-2',
    'prose-blockquote:text-foreground/80 prose-blockquote:leading-8',
    '[&_blockquote.note]:border-blue-500 [&_blockquote.note]:bg-blue-500/5',
    '[&_blockquote.warning]:border-yellow-500 [&_blockquote.warning]:bg-yellow-500/5',
    '[&_blockquote.danger]:border-red-500 [&_blockquote.danger]:bg-red-500/5',
    '[&_blockquote>p]:!mt-0 [&_blockquote>p]:!mb-0',

    // 列表样式
    'prose-ul:my-6 prose-ul:list-disc prose-ul:pl-8',
    'prose-ol:my-6 prose-ol:list-decimal prose-ol:pl-8',
    'prose-li:my-2 prose-li:text-foreground/80',
    'prose-li>:first-child:!mt-0 prose-li>:last-child:!mb-0',

    // 其他元素
    'prose-hr:my-12 prose-hr:border-border/30',
    'prose-table:my-8 prose-table:text-foreground/80',
    'prose-th:bg-muted prose-th:text-foreground/90',
    'prose-td:!px-4 prose-td:!py-3',
    '[&_table]:!border [&_table]:border-border/30',
    '[&_td]:border [&_td]:border-border/30',
    '[&_th]:border [&_th]:border-border/30',
    'prose-img:!my-8 prose-img:rounded-lg prose-img:border prose-img:border-border/30',
    'prose-a:text-primary prose-a:no-underline hover:prose-a:underline',
    '[&_.external-link-icon]:inline [&_.external-link-icon]:ml-1 [&_.external-link-icon]:opacity-60',

    // 数学公式
    '[&_.math-display]:my-6 [&_.math-display]:px-8 [&_.math-display]:py-4',
    '[&_.math-display]:overflow-x-auto [&_.math-display]:bg-muted/30',
    '[&_.math-display]:rounded-lg [&_.math-display]:border [&_.math-display]:border-border/30',

    className,
  ]}
>
  <slot />
</div>
